<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Form Bootstrap Completo</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" 
          integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
    <style>
        body {
            padding: 20px 0;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }
        .form-container {
            max-width: 600px;
            margin: 0 auto;
        }
        .card {
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }
    </style>
</head>
<body>
    <div class="container form-container">
        <div class="card">
            <div class="card-header bg-primary text-white">
                <h3 class="mb-0">Registrazione Utente</h3>
            </div>
            <div class="card-body">
                <form id="registrationForm" class="needs-validation" novalidate>
                    <!-- Personal Info -->
                    <h5 class="mb-3">Informazioni Personali</h5>
                    
                    <div class="row g-3 mb-3">
                        <div class="col-md-6">
                            <label for="firstName" class="form-label">Nome *</label>
                            <input type="text" class="form-control" id="firstName" required>
                            <div class="invalid-feedback">Inserisci il tuo nome</div>
                        </div>
                        <div class="col-md-6">
                            <label for="lastName" class="form-label">Cognome *</label>
                            <input type="text" class="form-control" id="lastName" required>
                            <div class="invalid-feedback">Inserisci il tuo cognome</div>
                        </div>
                    </div>

                    <div class="mb-3">
                        <label for="email" class="form-label">Email *</label>
                        <div class="input-group has-validation">
                            <span class="input-group-text">@</span>
                            <input type="email" class="form-control" id="email" required>
                            <div class="invalid-feedback">Inserisci un'email valida</div>
                        </div>
                    </div>

                    <div class="mb-3">
                        <label for="phone" class="form-label">Telefono</label>
                        <input type="tel" class="form-control" id="phone" 
                               placeholder="+39 123 456 7890">
                    </div>

                    <div class="mb-3">
                        <label for="birthdate" class="form-label">Data di Nascita *</label>
                        <input type="date" class="form-control" id="birthdate" required>
                        <div class="invalid-feedback">Seleziona la tua data di nascita</div>
                    </div>

                    <div class="mb-3">
                        <label class="form-label">Genere *</label>
                        <div>
                            <div class="form-check form-check-inline">
                                <input class="form-check-input" type="radio" name="gender" 
                                       id="genderMale" value="male" required>
                                <label class="form-check-label" for="genderMale">Maschio</label>
                            </div>
                            <div class="form-check form-check-inline">
                                <input class="form-check-input" type="radio" name="gender" 
                                       id="genderFemale" value="female" required>
                                <label class="form-check-label" for="genderFemale">Femmina</label>
                            </div>
                            <div class="form-check form-check-inline">
                                <input class="form-check-input" type="radio" name="gender" 
                                       id="genderOther" value="other" required>
                                <label class="form-check-label" for="genderOther">Altro</label>
                            </div>
                            <div class="invalid-feedback d-block" id="genderError" style="display:none!important;">
                                Seleziona un genere
                            </div>
                        </div>
                    </div>

                    <hr class="my-4">

                    <!-- Account Info -->
                    <h5 class="mb-3">Informazioni Account</h5>

                    <div class="mb-3">
                        <label for="username" class="form-label">Username *</label>
                        <input type="text" class="form-control" id="username" 
                               minlength="4" required>
                        <div class="form-text">Minimo 4 caratteri</div>
                        <div class="invalid-feedback">Username richiesto (min 4 caratteri)</div>
                    </div>

                    <div class="mb-3">
                        <label for="password" class="form-label">Password *</label>
                        <input type="password" class="form-control" id="password" 
                               minlength="8" required>
                        <div class="form-text">
                            Minimo 8 caratteri, almeno una lettera maiuscola e un numero
                        </div>
                        <div class="invalid-feedback">Password non valida</div>
                    </div>

                    <div class="mb-3">
                        <label for="confirmPassword" class="form-label">Conferma Password *</label>
                        <input type="password" class="form-control" id="confirmPassword" 
                               minlength="8" required>
                        <div class="invalid-feedback">Le password non corrispondono</div>
                    </div>

                    <hr class="my-4">

                    <!-- Preferences -->
                    <h5 class="mb-3">Preferenze</h5>

                    <div class="mb-3">
                        <label for="country" class="form-label">Paese *</label>
                        <select class="form-select" id="country" required>
                            <option value="">Seleziona...</option>
                            <option value="IT">Italia</option>
                            <option value="FR">Francia</option>
                            <option value="DE">Germania</option>
                            <option value="ES">Spagna</option>
                            <option value="UK">Regno Unito</option>
                        </select>
                        <div class="invalid-feedback">Seleziona un paese</div>
                    </div>

                    <div class="mb-3">
                        <label class="form-label">Interessi</label>
                        <div class="form-check">
                            <input class="form-check-input" type="checkbox" value="tech" 
                                   id="interestTech">
                            <label class="form-check-label" for="interestTech">
                                Tecnologia
                            </label>
                        </div>
                        <div class="form-check">
                            <input class="form-check-input" type="checkbox" value="sport" 
                                   id="interestSport">
                            <label class="form-check-label" for="interestSport">
                                Sport
                            </label>
                        </div>
                        <div class="form-check">
                            <input class="form-check-input" type="checkbox" value="music" 
                                   id="interestMusic">
                            <label class="form-check-label" for="interestMusic">
                                Musica
                            </label>
                        </div>
                        <div class="form-check">
                            <input class="form-check-input" type="checkbox" value="travel" 
                                   id="interestTravel">
                            <label class="form-check-label" for="interestTravel">
                                Viaggi
                            </label>
                        </div>
                    </div>

                    <div class="mb-3">
                        <label for="bio" class="form-label">Biografia</label>
                        <textarea class="form-control" id="bio" rows="3" 
                                  placeholder="Parlaci un po' di te..."></textarea>
                        <div class="form-text">Max 500 caratteri</div>
                    </div>

                    <div class="mb-3">
                        <label for="profilePicture" class="form-label">Foto Profilo</label>
                        <input class="form-control" type="file" id="profilePicture" 
                               accept="image/*">
                    </div>

                    <div class="mb-3">
                        <label for="favoriteColor" class="form-label">Colore Preferito</label>
                        <input type="color" class="form-control form-control-color" 
                               id="favoriteColor" value="#667eea">
                    </div>

                    <hr class="my-4">

                    <!-- Newsletter -->
                    <h5 class="mb-3">Newsletter</h5>

                    <div class="mb-3">
                        <div class="form-check form-switch">
                            <input class="form-check-input" type="checkbox" role="switch" 
                                   id="newsletter" checked>
                            <label class="form-check-label" for="newsletter">
                                Iscriviti alla newsletter
                            </label>
                        </div>
                    </div>

                    <div class="mb-3">
                        <label for="frequency" class="form-label">Frequenza Newsletter</label>
                        <input type="range" class="form-range" min="1" max="5" step="1" 
                               id="frequency" value="3">
                        <div class="d-flex justify-content-between">
                            <small>Giornaliera</small>
                            <small id="frequencyValue">Settimanale</small>
                            <small>Mensile</small>
                        </div>
                    </div>

                    <hr class="my-4">

                    <!-- Terms -->
                    <div class="mb-3">
                        <div class="form-check">
                            <input class="form-check-input" type="checkbox" value="" 
                                   id="terms" required>
                            <label class="form-check-label" for="terms">
                                Accetto i <a href="#" target="_blank">termini e condizioni</a> *
                            </label>
                            <div class="invalid-feedback">
                                Devi accettare i termini e condizioni
                            </div>
                        </div>
                    </div>

                    <!-- Submit -->
                    <div class="d-grid gap-2">
                        <button class="btn btn-primary btn-lg" type="submit">
                            Registrati
                        </button>
                        <button class="btn btn-outline-secondary" type="reset">
                            Cancella Form
                        </button>
                    </div>
                </form>
            </div>
        </div>

        <!-- Success Alert (inizialmente nascosto) -->
        <div class="alert alert-success alert-dismissible fade mt-3" role="alert" 
             id="successAlert" style="display:none;">
            <h4 class="alert-heading">Registrazione completata!</h4>
            <p>Il tuo account Ã¨ stato creato con successo.</p>
            <hr>
            <p class="mb-0">Controlla la tua email per confermare la registrazione.</p>
            <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js" 
            integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL" 
            crossorigin="anonymous"></script>
    
    <script>
        // Validazione form personalizzata
        (function () {
            'use strict'
            
            const form = document.getElementById('registrationForm')
            const password = document.getElementById('password')
            const confirmPassword = document.getElementById('confirmPassword')
            const frequencyRange = document.getElementById('frequency')
            const frequencyValue = document.getElementById('frequencyValue')
            const successAlert = document.getElementById('successAlert')
            
            // Aggiorna label frequenza newsletter
            const frequencyLabels = {
                '1': 'Giornaliera',
                '2': 'Bi-settimanale',
                '3': 'Settimanale',
                '4': 'Bi-mensile',
                '5': 'Mensile'
            }
            
            frequencyRange.addEventListener('input', function() {
                frequencyValue.textContent = frequencyLabels[this.value]
            })
            
            // Validazione password matching
            function validatePassword() {
                if (password.value !== confirmPassword.value) {
                    confirmPassword.setCustomValidity('Le password non corrispondono')
                } else {
                    confirmPassword.setCustomValidity('')
                }
            }
            
            password.addEventListener('change', validatePassword)
            confirmPassword.addEventListener('keyup', validatePassword)
            
            // Validazione strength password
            password.addEventListener('input', function() {
                const value = this.value
                const hasUpperCase = /[A-Z]/.test(value)
                const hasNumber = /[0-9]/.test(value)
                const isLongEnough = value.length >= 8
                
                if (!hasUpperCase || !hasNumber || !isLongEnough) {
                    this.setCustomValidity('La password deve contenere almeno una maiuscola e un numero')
                } else {
                    this.setCustomValidity('')
                }
            })
            
            // Submit form
            form.addEventListener('submit', function (event) {
                event.preventDefault()
                event.stopPropagation()
                
                if (!form.checkValidity()) {
                    form.classList.add('was-validated')
                } else {
                    // Form valido - simula invio
                    console.log('Form valido! Invio dati...')
                    
                    // Raccogli dati
                    const formData = {
                        firstName: document.getElementById('firstName').value,
                        lastName: document.getElementById('lastName').value,
                        email: document.getElementById('email').value,
                        phone: document.getElementById('phone').value,
                        birthdate: document.getElementById('birthdate').value,
                        gender: document.querySelector('input[name="gender"]:checked')?.value,
                        username: document.getElementById('username').value,
                        country: document.getElementById('country').value,
                        interests: Array.from(document.querySelectorAll('input[type="checkbox"]:checked:not(#terms):not(#newsletter)'))
                            .map(cb => cb.value),
                        bio: document.getElementById('bio').value,
                        newsletter: document.getElementById('newsletter').checked,
                        frequency: frequencyLabels[frequencyRange.value],
                        favoriteColor: document.getElementById('favoriteColor').value
                    }
                    
                    console.log('Dati da inviare:', formData)
                    
                    // Mostra successo
                    successAlert.style.display = 'block'
                    successAlert.classList.add('show')
                    
                    // Reset form
                    form.reset()
                    form.classList.remove('was-validated')
                    
                    // Scroll to top
                    window.scrollTo({ top: 0, behavior: 'smooth' })
                }
            }, false)
            
            // Reset validation on form reset
            form.addEventListener('reset', function() {
                form.classList.remove('was-validated')
                successAlert.style.display = 'none'
                successAlert.classList.remove('show')
            })
        })()
    </script>
</body>
</html>
