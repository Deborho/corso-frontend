<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>5.2 - TypeScript Fondamenti</title>
    <link rel="stylesheet" href="../style.css">
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>5.2 - TypeScript Fondamenti</h1>
            <p>Aggiungere tipi a JavaScript per codice pi√π sicuro</p>
        </div>

        <div class="teoria">
            <h2>Obiettivi</h2>
            <p>Comprendere come TypeScript migliora JavaScript aggiungendo controllo dei tipi, rendendo il codice pi√π sicuro e manutenibile.</p>
        </div>

        <h2>1. Cos'√® TypeScript?</h2>
        
        <div class="teoria">
            <p><strong>TypeScript √® JavaScript con un sistema di tipi</strong>. Aggiunge la possibilit√† di dichiarare che tipo di dati pu√≤ contenere una variabile, che parametri accetta una funzione, e che propriet√† ha un oggetto.</p>
            
            <h3>Il Problema di JavaScript</h3>
            <p>In JavaScript, questo codice √® valido ma causa errori a runtime:</p>
        </div>

        <div class="codice">
            <pre><code>// JavaScript - errore scoperto solo quando esegui il codice
function somma(a, b) {
    return a + b;
}

console.log(somma(5, "10"));  // "510" üò±
// Concatenazione invece di somma!</code></pre>
        </div>

        <div class="teoria">
            <h3>La Soluzione di TypeScript</h3>
            <p>TypeScript rileva l'errore <strong>prima di eseguire il codice</strong>, direttamente nell'editor:</p>
        </div>

        <div class="codice">
            <pre><code>// TypeScript - errore evidenziato immediatamente
function somma(a: number, b: number): number {
    return a + b;
}

somma(5, "10");  // ‚ùå Errore subito nell'editor!
// Argument of type 'string' is not assignable to parameter of type 'number'</code></pre>
        </div>

        <div class="teoria">
            <h3>Vantaggi di TypeScript</h3>
            <ul>
                <li>‚úÖ <strong>Errori trovati prima:</strong> L'editor ti avvisa subito, non quando il codice viene eseguito</li>
                <li>‚úÖ <strong>Autocompletamento migliore:</strong> L'editor sa quali propriet√† e metodi sono disponibili</li>
                <li>‚úÖ <strong>Codice auto-documentante:</strong> I tipi spiegano cosa fa ogni funzione</li>
                <li>‚úÖ <strong>Refactoring sicuro:</strong> Rinominare variabili aggiorna automaticamente tutti gli usi</li>
            </ul>
        </div>

        <h2>2. Tipizzazione delle Variabili</h2>

        <div class="teoria">
            <p>Abbiamo visto in JavaScript che usiamo <code>const</code> e <code>let</code> per dichiarare variabili. TypeScript aggiunge i <strong>tipi</strong>: possiamo dire esplicitamente che tipo di dato conterr√† una variabile.</p>
            
            <h3>Sintassi: const nome: tipo = valore</h3>
            <p>I tipi base sono: <strong>string</strong> (testo), <strong>number</strong> (numeri), <strong>boolean</strong> (true/false)</p>
        </div>

        <div class="codice">
            <h3>JavaScript vs TypeScript</h3>
            <pre><code>// JavaScript - nessun controllo
let nome = "Mario";
nome = 123;  // JavaScript accetta questo, ma √® probabilmente un bug!

// TypeScript - con controllo tipi
let nome: string = "Mario";
nome = 123;  // ‚ùå Errore immediato!
// Type 'number' is not assignable to type 'string'</code></pre>
        </div>

        <div class="codice">
            <h3>Tipi Primitivi</h3>
            <pre><code>// String - testo
let nome: string = "Mario";
let cognome: string = "Rossi";

// Number - numeri (interi e decimali)
let eta: number = 25;
let prezzo: number = 19.99;

// Boolean - vero o falso
let isAttivo: boolean = true;
let haPagato: boolean = false;

// TypeScript pu√≤ anche inferire il tipo automaticamente
let citta = "Roma";  // TypeScript capisce che √® string
// citta = 123;      // ‚ùå Errore anche senza tipo esplicito!</code></pre>
        </div>

        <h3>Esempio Pratico</h3>

        <div class="codice">
<pre><code>// Esempio e-commerce con tipi
let nomeProdotto: string = "Laptop";
let prezzoProdotto: number = 999;
let disponibile: boolean = true;
let quantita: number = 5;

// Calcoli sicuri - TypeScript verifica i tipi
const totale: number = prezzoProdotto * quantita;  // 4995

// ‚ùå Questi errori vengono rilevati subito nell'editor:
// prezzoProdotto = "999";  // Errore: string non √® number
// quantita = true;         // Errore: boolean non √® number
// disponibile = "si";      // Errore: string non √® boolean</code></pre>
        </div>

        <h2>3. Tipizzazione di Array</h2>

        <div class="teoria">
            <p>In JavaScript abbiamo visto gli array. In TypeScript possiamo specificare che tipo di elementi contiene un array, cos√¨ TypeScript ci avvisa se proviamo ad aggiungere elementi del tipo sbagliato.</p>
            
            <h3>Sintassi: tipo[]</h3>
            <p>Esempio: <code>string[]</code> = array di stringhe, <code>number[]</code> = array di numeri</p>
        </div>

        <div class="codice">
            <pre><code>// Array tipizzati
let numeri: number[] = [1, 2, 3, 4, 5];
let nomi: string[] = ["Mario", "Laura", "Carlo"];
let stati: boolean[] = [true, false, true];

// TypeScript controlla cosa aggiungiamo
numeri.push(6);        // ‚úÖ OK
// numeri.push("7");   // ‚ùå Errore: string non √® number

nomi.push("Anna");     // ‚úÖ OK
// nomi.push(123);     // ‚ùå Errore: number non √® string</code></pre>
        </div>

        <h3>Esempio Pratico</h3>

        <div class="codice">
<pre><code>// Esempio: lista prodotti e-commerce
let prodotti: string[] = ["Laptop", "Mouse", "Tastiera"];
let prezzi: number[] = [999, 25, 75];

// TypeScript sa che prodotti[0] √® una string
console.log(prodotti[0].toUpperCase());  // "LAPTOP"

// TypeScript sa che prezzi[1] √® un number
console.log(prezzi[1].toFixed(2));  // "25.00"

// Operazioni sicure con array
const totale: number = prezzi.reduce((sum, prezzo) => sum + prezzo, 0);
console.log(totale);  // 1099</code></pre>
        </div>

        <h2>4. Tipizzazione di Oggetti</h2>

        <div class="teoria">
            <p>In JavaScript abbiamo visto come creare oggetti con propriet√†. In TypeScript possiamo definire la <strong>struttura</strong> di un oggetto usando le <strong>interfacce</strong>, specificando quali propriet√† deve avere e di che tipo.</p>
            
            <h3>Vantaggi delle Interfacce</h3>
            <ul>
                <li>L'editor ti avvisa se dimentichi una propriet√† obbligatoria</li>
                <li>Ti avvisa se scrivi male il nome di una propriet√†</li>
                <li>Autocompletamento delle propriet√† disponibili</li>
            </ul>
        </div>

        <div class="codice">
            <h3>Definire un'Interfaccia</h3>
            <pre><code>// Interfaccia: descrive la struttura di un oggetto
interface Prodotto {
    id: number;
    nome: string;
    prezzo: number;
    disponibile: boolean;
}

// Creare oggetti che seguono l'interfaccia
const laptop: Prodotto = {
    id: 1,
    nome: "Laptop",
    prezzo: 999,
    disponibile: true
};

// ‚ùå TypeScript rileva errori:
const mouse: Prodotto = {
    id: 2,
    nome: "Mouse"
    // Errore: Property 'prezzo' is missing
    // Errore: Property 'disponibile' is missing
};

const tastiera: Prodotto = {
    id: 3,
    nome: "Tastiera",
    prezo: 75,  // Errore: typo! 'prezo' invece di 'prezzo'
    disponibile: true
};</code></pre>
        </div>

        <h3>Esempio Pratico</h3>

        <div class="codice">
<pre><code>// Interfaccia per utente
interface Utente {
    id: number;
    nome: string;
    email: string;
    eta: number;
}

// Funzione che accetta un utente
function salutaUtente(utente: Utente): string {
    return `Ciao ${utente.nome}! Hai ${utente.eta} anni.`;
}

// Uso corretto
const mario: Utente = {
    id: 1,
    nome: "Mario Rossi",
    email: "mario@example.com",
    eta: 30
};

console.log(salutaUtente(mario));  // "Ciao Mario Rossi! Hai 30 anni."

// Array di utenti
const utenti: Utente[] = [mario];
utenti.forEach(utente => {
    // L'editor sa che utente ha le propriet√†: id, nome, email, eta
    console.log(utente.email);
});</code></pre>
        </div>

        <h2>5. Tipizzazione di Funzioni</h2>

        <div class="teoria">
            <p>In JavaScript abbiamo visto le funzioni. In TypeScript possiamo specificare il tipo dei <strong>parametri</strong> e il tipo del <strong>valore di ritorno</strong>. Questo rende chiaro cosa accetta la funzione e cosa restituisce.</p>
            
            <h3>Sintassi: function nome(param: tipo): tipoRitorno</h3>
        </div>

        <div class="codice">
            <h3>Funzioni Tipizzate</h3>
            <pre><code>// Funzione con parametri e return tipizzati
function somma(a: number, b: number): number {
    return a + b;
}

const risultato = somma(5, 10);  // TypeScript sa che risultato √® number
// somma(5, "10");  // ‚ùå Errore: string non √® number

// Arrow function tipizzata
const moltiplica = (a: number, b: number): number => {
    return a * b;
};

// Con return implicito
const sottrai = (a: number, b: number): number => a - b;

// Funzione senza return (void)
function stampaMessaggio(testo: string): void {
    console.log(testo);
    // Non ritorna nulla
}</code></pre>
        </div>

        <div class="codice">
            <h3>Parametri Opzionali</h3>
            <pre><code>// Parametro opzionale con ?
function saluta(nome: string, cognome?: string): string {
    if (cognome) {
        return `Ciao ${nome} ${cognome}`;
    }
    return `Ciao ${nome}`;
}

console.log(saluta("Mario"));              // "Ciao Mario"
console.log(saluta("Mario", "Rossi"));     // "Ciao Mario Rossi"

// Parametro con valore di default
function calcola Sconto(prezzo: number, sconto: number = 10): number {
    return prezzo * (1 - sconto / 100);
}

console.log(calcolaSconto(100));      // 90 (sconto 10% default)
console.log(calcolaSconto(100, 20));  // 80 (sconto 20%)</code></pre>
        </div>

        <h3>Esempio Pratico</h3>

        <div class="codice">
<pre><code>// Interfaccia Prodotto
interface Prodotto {
    id: number;
    nome: string;
    prezzo: number;
}

// Funzione che calcola totale carrello
function calcolaTotale(prodotti: Prodotto[]): number {
    return prodotti.reduce((totale, prodotto) => totale + prodotto.prezzo, 0);
}

// Funzione che applica sconto
function applicaSconto(totale: number, percentuale: number): number {
    return totale * (1 - percentuale / 100);
}

// Funzione che aggiunge IVA
function aggiungiIVA(prezzo: number): number {
    return prezzo * 1.22;
}

// Uso
const carrello: Prodotto[] = [
    { id: 1, nome: "Laptop", prezzo: 999 },
    { id: 2, nome: "Mouse", prezzo: 25 }
];

const totale = calcolaTotale(carrello);        // 1024
const conSconto = applicaSconto(totale, 10);   // 921.6
const finale = aggiungiIVA(conSconto);         // 1124.35

console.log(`Prezzo finale: ‚Ç¨${finale.toFixed(2)}`);  // "Prezzo finale: ‚Ç¨1124.35"</code></pre>
        </div>

        <h2>6. Tipizzazione di Classi</h2>

        <div class="teoria">
            <p>In JavaScript abbiamo visto le classi. In TypeScript possiamo aggiungere tipi alle propriet√† e ai metodi della classe, rendendo pi√π chiaro come usarle.</p>
            
            <h3>Vantaggi con TypeScript</h3>
            <ul>
                <li>Le propriet√† hanno un tipo dichiarato</li>
                <li>I metodi hanno parametri e return tipizzati</li>
                <li>L'editor ti avvisa se usi propriet√† che non esistono</li>
            </ul>
        </div>

        <div class="codice">
            <h3>Classe Tipizzata</h3>
            <pre><code>// Classe con propriet√† e metodi tipizzati
class Prodotto {
    // Propriet√† con tipi
    id: number;
    nome: string;
    prezzo: number;
    disponibile: boolean;
    
    // Constructor tipizzato
    constructor(id: number, nome: string, prezzo: number) {
        this.id = id;
        this.nome = nome;
        this.prezzo = prezzo;
        this.disponibile = true;
    }
    
    // Metodi con parametri e return tipizzati
    applicaSconto(percentuale: number): number {
        return this.prezzo * (1 - percentuale / 100);
    }
    
    setDisponibile(disponibile: boolean): void {
        this.disponibile = disponibile;
    }
    
    get prezzoConIVA(): number {
        return this.prezzo * 1.22;
    }
}

// Creare istanze
const laptop = new Prodotto(1, "Laptop", 999);
console.log(laptop.applicaSconto(10));  // 899.1
console.log(laptop.prezzoConIVA);       // 1218.78</code></pre>
        </div>

        <h3>Esempio Pratico</h3>

        <div class="codice">
<pre><code>// Interfaccia per elemento carrello
interface ElementoCarrello {
    prodotto: Prodotto;
    quantita: number;
}

// Classe Carrello tipizzata
class Carrello {
    private elementi: ElementoCarrello[] = [];
    
    aggiungi(prodotto: Prodotto, quantita: number): void {
        this.elementi.push({ prodotto, quantita });
    }
    
    rimuovi(idProdotto: number): void {
        this.elementi = this.elementi.filter(
            el => el.prodotto.id !== idProdotto
        );
    }
    
    get totale(): number {
        return this.elementi.reduce((sum, el) => {
            return sum + (el.prodotto.prezzo * el.quantita);
        }, 0);
    }
    
    get numeroProdotti(): number {
        return this.elementi.reduce((sum, el) => sum + el.quantita, 0);
    }
}

// Utilizzo
const carrello = new Carrello();
const laptop = new Prodotto(1, "Laptop", 999);
const mouse = new Prodotto(2, "Mouse", 25);

carrello.aggiungi(laptop, 1);
carrello.aggiungi(mouse, 2);

console.log(carrello.numeroProdotti);  // 3
console.log(carrello.totale);          // 1049</code></pre>
        </div>

        <div class="teoria">
            <h2>Riepilogo TypeScript</h2>
            <table>
                <tr>
                    <th>Concetto JavaScript</th>
                    <th>Come TypeScript lo Migliora</th>
                </tr>
                <tr>
                    <td>Variabili (const/let)</td>
                    <td>Aggiungi tipo: <code>let nome: string</code></td>
                </tr>
                <tr>
                    <td>Array</td>
                    <td>Array tipizzati: <code>number[]</code>, <code>string[]</code></td>
                </tr>
                <tr>
                    <td>Oggetti</td>
                    <td>Interfacce per definire struttura</td>
                </tr>
                <tr>
                    <td>Funzioni</td>
                    <td>Parametri e return tipizzati</td>
                </tr>
                <tr>
                    <td>Classi</td>
                    <td>Propriet√† e metodi con tipi</td>
                </tr>
            </table>
            
            <p><strong>Punto Chiave:</strong> TypeScript = JavaScript + Type Safety. Scrivi lo stesso codice JavaScript che conosci, ma con l'aggiunta dei tipi che prevengono errori!</p>
        </div>

        <div class="navigazione">
            <a href="/lezione-5/lezione-5-1.html" class="btn-prev">‚Üê Lezione Precedente</a>
            <a href="/index.html" class="btn-home">Home</a>
            <a href="/link-utili.html" class="btn-link-utili">Link Utili</a>
            <a href="/lezione-5/lezione-5-3.html" class="btn-next">Prossima Lezione ‚Üí</a>
        </div>
    </div>
</body>
</html>
