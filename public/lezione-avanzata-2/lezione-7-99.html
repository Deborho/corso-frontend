<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Progetto Finale - E-Commerce React App</title>
    <link rel="stylesheet" href="../style.css">
    <link rel="stylesheet" href="lezione-7-99.css">
</head>
<body>
    <div class="container">
        <div class="project-header">
            <h1>üõçÔ∏è Progetto Finale - E-Commerce App</h1>
            <p class="subtitle">Applicazione React completa con tutte le features fondamentali</p>
        </div>
        
        <div class="project-info">
            <h2>üìã Features Implementate</h2>
            <ul>
                <li><strong>Componenti:</strong> Function components con props e composition</li>
                <li><strong>State Management:</strong> useState per carrello, filtri, form</li>
                <li><strong>Effects:</strong> useEffect per fetch API e localStorage</li>
                <li><strong>Form:</strong> Controlled components per ricerca e checkout</li>
                <li><strong>Liste:</strong> Rendering condizionale e map() per prodotti</li>
                <li><strong>Lifting State Up:</strong> Carrello condiviso tra componenti</li>
                <li><strong>Custom Hooks:</strong> useLocalStorage, useFetch</li>
                <li><strong>Context API:</strong> CartContext per stato globale carrello</li>
                <li><strong>Event Handling:</strong> onClick, onChange, onSubmit</li>
            </ul>
        </div>
        
        <div class="code-section">
            <h2>üé£ Custom Hooks (hooks/)</h2>
            
            <h3>hooks/useLocalStorage.js</h3>
            <div class="codice">
<pre>import { useState, useEffect } from 'react'

export function useLocalStorage(key, initialValue) {
  const [value, setValue] = useState(() =&gt; {
    try {
      const item = localStorage.getItem(key)
      return item ? JSON.parse(item) : initialValue
    } catch (error) {
      console.error(error)
      return initialValue
    }
  })
  
  useEffect(() =&gt; {
    try {
      localStorage.setItem(key, JSON.stringify(value))
    } catch (error) {
      console.error(error)
    }
  }, [key, value])
  
  return [value, setValue]
}</pre>
            </div>
            
            <h3>hooks/useFetch.js</h3>
            <div class="codice">
<pre>import { useState, useEffect } from 'react'

export function useFetch(url) {
  const [data, setData] = useState(null)
  const [loading, setLoading] = useState(true)
  const [error, setError] = useState(null)
  
  useEffect(() =&gt; {
    const controller = new AbortController()
    
    async function fetchData() {
      try {
        setLoading(true)
        const response = await fetch(url, { signal: controller.signal })
        const json = await response.json()
        setData(json)
        setError(null)
      } catch (err) {
        if (err.name !== 'AbortError') {
          setError(err.message)
        }
      } finally {
        setLoading(false)
      }
    }
    
    fetchData()
    return () =&gt; controller.abort()
  }, [url])
  
  return { data, loading, error }
}</pre>
            </div>
        </div>
        
        <div class="code-section">
            <h2>üåê Context API (contexts/CartContext.jsx)</h2>
            
            <div class="codice">
<pre>import { createContext, useContext } from 'react'
import { useLocalStorage } from '../hooks/useLocalStorage'

const CartContext = createContext()

export function CartProvider({ children }) {
  const [cartItems, setCartItems] = useLocalStorage('cart', [])
  
  const addToCart = (product) =&gt; {
    setCartItems(prev =&gt; {
      const existing = prev.find(item =&gt; item.id === product.id)
      
      if (existing) {
        return prev.map(item =&gt;
          item.id === product.id
            ? { ...item, quantity: item.quantity + 1 }
            : item
        )
      }
      
      return [...prev, { ...product, quantity: 1 }]
    })
  }
  
  const removeFromCart = (productId) =&gt; {
    setCartItems(prev =&gt; prev.filter(item =&gt; item.id !== productId))
  }
  
  const updateQuantity = (productId, quantity) =&gt; {
    if (quantity <= 0) {
      removeFromCart(productId)
      return
    }
    
    setCartItems(prev =&gt;
      prev.map(item =&gt;
        item.id === productId ? { ...item, quantity } : item
      )
    )
  }
  
  const clearCart = () =&gt; {
    setCartItems([])
  }
  
  const totalItems = cartItems.reduce((sum, item) =&gt; sum + item.quantity, 0)
  const totalPrice = cartItems.reduce(
    (sum, item) =&gt; sum + item.price * item.quantity,
    0
  )
  
  const value = {
    cartItems,
    addToCart,
    removeFromCart,
    updateQuantity,
    clearCart,
    totalItems,
    totalPrice
  }
  
  return (
    &lt;CartContext.Provider value={value}&gt;
      {children}
    &lt;/CartContext.Provider&gt;
  )
}

export function useCart() {
  const context = useContext(CartContext)
  
  if (!context) {
    throw new Error('useCart must be used within CartProvider')
  }
  
  return context
}</pre>
            </div>
        </div>
        
        <div class="code-section">
            <h2>üß© Componenti Principali</h2>
            
            <h3>components/Navbar.jsx</h3>
            <div class="codice">
<pre>import { useCart } from '../contexts/CartContext'

function Navbar({ onCartClick }) {
  const { totalItems } = useCart()
  
  return (
    &lt;nav className="navbar"&gt;
      &lt;div className="navbar-brand"&gt;
        &lt;h1&gt;üõçÔ∏è E-Commerce&lt;/h1&gt;
      &lt;/div&gt;
      
      &lt;div className="navbar-menu"&gt;
        &lt;a href="#"&gt;Home&lt;/a&gt;
        &lt;a href="#"&gt;Prodotti&lt;/a&gt;
        &lt;a href="#"&gt;Chi Siamo&lt;/a&gt;
      &lt;/div&gt;
      
      &lt;button className="cart-button" onClick={onCartClick}&gt;
        üõí Carrello
        {totalItems > 0 && (
          &lt;span className="cart-badge"&gt;{totalItems}&lt;/span&gt;
        )}
      &lt;/button&gt;
    &lt;/nav&gt;
  )
}</pre>
            </div>
            
            <h3>components/SearchBar.jsx</h3>
            <div class="codice">
<pre>import { useState } from 'react'

function SearchBar({ onSearch }) {
  const [query, setQuery] = useState('')
  
  const handleSubmit = (e) =&gt; {
    e.preventDefault()
    onSearch(query)
  }
  
  return (
    &lt;form className="search-bar" onSubmit={handleSubmit}&gt;
      &lt;input
        type="text"
        value={query}
        onChange={(e) =&gt; setQuery(e.target.value)}
        placeholder="Cerca prodotti..."
      /&gt;
      &lt;button type="submit"&gt;üîç Cerca&lt;/button&gt;
    &lt;/form&gt;
  )
}</pre>
            </div>
            
            <h3>components/FilterBar.jsx</h3>
            <div class="codice">
<pre>function FilterBar({ category, setCategory, sortBy, setSortBy }) {
  const categories = ['all', 'electronics', 'clothing', 'books']
  
  return (
    &lt;div className="filter-bar"&gt;
      &lt;div className="filters"&gt;
        &lt;label&gt;Categoria:&lt;/label&gt;
        {categories.map(cat =&gt; (
          &lt;button
            key={cat}
            className={category === cat ? 'active' : ''}
            onClick={() =&gt; setCategory(cat)}
          &gt;
            {cat}
          &lt;/button&gt;
        ))}
      &lt;/div&gt;
      
      &lt;div className="sort"&gt;
        &lt;label&gt;Ordina per:&lt;/label&gt;
        &lt;select value={sortBy} onChange={(e) =&gt; setSortBy(e.target.value)}&gt;
          &lt;option value="name"&gt;Nome&lt;/option&gt;
          &lt;option value="price-asc"&gt;Prezzo: Basso ‚Üí Alto&lt;/option&gt;
          &lt;option value="price-desc"&gt;Prezzo: Alto ‚Üí Basso&lt;/option&gt;
        &lt;/select&gt;
      &lt;/div&gt;
    &lt;/div&gt;
  )
}</pre>
            </div>
            
            <h3>components/ProductCard.jsx</h3>
            <div class="codice">
<pre>import { useCart } from '../contexts/CartContext'

function ProductCard({ product }) {
  const { addToCart } = useCart()
  
  return (
    &lt;div className="product-card"&gt;
      &lt;img src={product.image} alt={product.name} /&gt;
      &lt;h3&gt;{product.name}&lt;/h3&gt;
      &lt;p className="description"&gt;{product.description}&lt;/p&gt;
      &lt;div className="card-footer"&gt;
        &lt;span className="price"&gt;‚Ç¨{product.price.toFixed(2)}&lt;/span&gt;
        &lt;button onClick={() =&gt; addToCart(product)}&gt;
          Aggiungi al Carrello
        &lt;/button&gt;
      &lt;/div&gt;
    &lt;/div&gt;
  )
}</pre>
            </div>
            
            <h3>components/ProductList.jsx</h3>
            <div class="codice">
<pre>import ProductCard from './ProductCard'

function ProductList({ products, loading, error }) {
  if (loading) {
    return &lt;div className="loading"&gt;‚è≥ Caricamento prodotti...&lt;/div&gt;
  }
  
  if (error) {
    return &lt;div className="error"&gt;‚ùå Errore: {error}&lt;/div&gt;
  }
  
  if (products.length === 0) {
    return (
      &lt;div className="empty-state"&gt;
        &lt;p&gt;Nessun prodotto trovato&lt;/p&gt;
      &lt;/div&gt;
    )
  }
  
  return (
    &lt;div className="product-grid"&gt;
      {products.map(product =&gt; (
        &lt;ProductCard key={product.id} product={product} /&gt;
      ))}
    &lt;/div&gt;
  )
}</pre>
            </div>
            
            <h3>components/Cart.jsx</h3>
            <div class="codice">
<pre>import { useCart } from '../contexts/CartContext'
import CartItem from './CartItem'

function Cart({ isOpen, onClose }) {
  const { cartItems, totalPrice, clearCart } = useCart()
  
  if (!isOpen) return null
  
  return (
    &lt;div className="cart-modal"&gt;
      &lt;div className="cart-overlay" onClick={onClose} /&gt;
      
      &lt;div className="cart-content"&gt;
        &lt;div className="cart-header"&gt;
          &lt;h2&gt;üõí Il Tuo Carrello&lt;/h2&gt;
          &lt;button onClick={onClose}&gt;‚úï&lt;/button&gt;
        &lt;/div&gt;
        
        {cartItems.length === 0 ? (
          &lt;p className="empty-cart"&gt;Il carrello √® vuoto&lt;/p&gt;
        ) : (
          &lt;&gt;
            &lt;div className="cart-items"&gt;
              {cartItems.map(item =&gt; (
                &lt;CartItem key={item.id} item={item} /&gt;
              ))}
            &lt;/div&gt;
            
            &lt;div className="cart-footer"&gt;
              &lt;div className="cart-total"&gt;
                &lt;strong&gt;Totale:&lt;/strong&gt;
                &lt;span&gt;‚Ç¨{totalPrice.toFixed(2)}&lt;/span&gt;
              &lt;/div&gt;
              
              &lt;div className="cart-actions"&gt;
                &lt;button onClick={clearCart} className="btn-secondary"&gt;
                  Svuota Carrello
                &lt;/button&gt;
                &lt;button className="btn-primary"&gt;
                  Procedi al Checkout
                &lt;/button&gt;
              &lt;/div&gt;
            &lt;/div&gt;
          &lt;/&gt;
        )}
      &lt;/div&gt;
    &lt;/div&gt;
  )
}</pre>
            </div>
            
            <h3>components/CartItem.jsx</h3>
            <div class="codice">
<pre>import { useCart } from '../contexts/CartContext'

function CartItem({ item }) {
  const { updateQuantity, removeFromCart } = useCart()
  
  return (
    &lt;div className="cart-item"&gt;
      &lt;img src={item.image} alt={item.name} /&gt;
      
      &lt;div className="item-details"&gt;
        &lt;h4&gt;{item.name}&lt;/h4&gt;
        &lt;p className="item-price"&gt;‚Ç¨{item.price.toFixed(2)}&lt;/p&gt;
      &lt;/div&gt;
      
      &lt;div className="quantity-controls"&gt;
        &lt;button onClick={() =&gt; updateQuantity(item.id, item.quantity - 1)}&gt;
          ‚àí
        &lt;/button&gt;
        &lt;span&gt;{item.quantity}&lt;/span&gt;
        &lt;button onClick={() =&gt; updateQuantity(item.id, item.quantity + 1)}&gt;
          +
        &lt;/button&gt;
      &lt;/div&gt;
      
      &lt;div className="item-total"&gt;
        ‚Ç¨{(item.price * item.quantity).toFixed(2)}
      &lt;/div&gt;
      
      &lt;button
        className="remove-btn"
        onClick={() =&gt; removeFromCart(item.id)}
      &gt;
        üóëÔ∏è
      &lt;/button&gt;
    &lt;/div&gt;
  )
}</pre>
            </div>
        </div>
        
        <div class="code-section">
            <h2>üì± App Principale (App.jsx)</h2>
            
            <div class="codice">
<pre>import { useState, useEffect } from 'react'
import { CartProvider } from './contexts/CartContext'
import Navbar from './components/Navbar'
import SearchBar from './components/SearchBar'
import FilterBar from './components/FilterBar'
import ProductList from './components/ProductList'
import Cart from './components/Cart'
import './App.css'

function App() {
  const [products, setProducts] = useState([])
  const [filteredProducts, setFilteredProducts] = useState([])
  const [loading, setLoading] = useState(true)
  const [error, setError] = useState(null)
  const [searchQuery, setSearchQuery] = useState('')
  const [category, setCategory] = useState('all')
  const [sortBy, setSortBy] = useState('name')
  const [isCartOpen, setIsCartOpen] = useState(false)
  
  // Fetch prodotti al mount
  useEffect(() =&gt; {
    async function fetchProducts() {
      try {
        const response = await fetch('/api/products')
        const data = await response.json()
        setProducts(data)
        setFilteredProducts(data)
      } catch (err) {
        setError(err.message)
      } finally {
        setLoading(false)
      }
    }
    
    fetchProducts()
  }, [])
  
  // Filter & Sort quando cambiano i parametri
  useEffect(() =&gt; {
    let result = products
    
    // Filtra per ricerca
    if (searchQuery) {
      result = result.filter(p =&gt;
        p.name.toLowerCase().includes(searchQuery.toLowerCase())
      )
    }
    
    // Filtra per categoria
    if (category !== 'all') {
      result = result.filter(p =&gt; p.category === category)
    }
    
    // Ordina
    result = [...result].sort((a, b) =&gt; {
      switch (sortBy) {
        case 'price-asc':
          return a.price - b.price
        case 'price-desc':
          return b.price - a.price
        case 'name':
        default:
          return a.name.localeCompare(b.name)
      }
    })
    
    setFilteredProducts(result)
  }, [products, searchQuery, category, sortBy])
  
  return (
    &lt;CartProvider&gt;
      &lt;div className="App"&gt;
        &lt;Navbar onCartClick={() =&gt; setIsCartOpen(true)} /&gt;
        
        &lt;main className="main-content"&gt;
          &lt;SearchBar onSearch={setSearchQuery} /&gt;
          
          &lt;FilterBar
            category={category}
            setCategory={setCategory}
            sortBy={sortBy}
            setSortBy={setSortBy}
          /&gt;
          
          &lt;ProductList
            products={filteredProducts}
            loading={loading}
            error={error}
          /&gt;
        &lt;/main&gt;
        
        &lt;Cart
          isOpen={isCartOpen}
          onClose={() =&gt; setIsCartOpen(false)}
        /&gt;
      &lt;/div&gt;
    &lt;/CartProvider&gt;
  )
}

export default App</pre>
            </div>
        </div>
        
        <div class="react-features">
            <h2>üéØ Features React Dimostrate</h2>
            <div class="features-grid">
                <div class="feature-card">
                    <h3>‚úÖ Componenti</h3>
                    <p>Function components, props, composition, children</p>
                </div>
                <div class="feature-card">
                    <h3>‚úÖ useState</h3>
                    <p>State management per filtri, carrello, modal</p>
                </div>
                <div class="feature-card">
                    <h3>‚úÖ useEffect</h3>
                    <p>Fetch API, dependencies, cleanup</p>
                </div>
                <div class="feature-card">
                    <h3>‚úÖ Custom Hooks</h3>
                    <p>useLocalStorage, useFetch riutilizzabili</p>
                </div>
                <div class="feature-card">
                    <h3>‚úÖ Context API</h3>
                    <p>CartContext per stato globale</p>
                </div>
                <div class="feature-card">
                    <h3>‚úÖ Forms</h3>
                    <p>Controlled inputs, search, filters</p>
                </div>
                <div class="feature-card">
                    <h3>‚úÖ Liste</h3>
                    <p>Map, filter, sort, key prop</p>
                </div>
                <div class="feature-card">
                    <h3>‚úÖ Eventi</h3>
                    <p>onClick, onChange, onSubmit</p>
                </div>
                <div class="feature-card">
                    <h3>‚úÖ Conditional Rendering</h3>
                    <p>Loading, error, empty states</p>
                </div>
                <div class="feature-card">
                    <h3>‚úÖ Lifting State</h3>
                    <p>Condivisione stato tra componenti</p>
                </div>
            </div>
        </div>
        
        <div class="setup-instructions">
            <h2>üöÄ Come Eseguire il Progetto</h2>
            <div class="codice">
<pre># 1. Crea progetto con Vite
npm create vite@latest ecommerce-app -- --template react

# 2. Entra nella cartella
cd ecommerce-app

# 3. Installa dipendenze
npm install

# 4. Copia i file del progetto nella cartella src/

# 5. Avvia development server
npm run dev

# 6. Apri browser su http://localhost:5173</pre>
            </div>
        </div>
        
        <div class="benefits">
            <h2>üí° Vantaggi di React in questo Progetto</h2>
            <ul>
                <li><strong>Component Reusability:</strong> ProductCard, CartItem riutilizzabili</li>
                <li><strong>State Management:</strong> Context API evita props drilling</li>
                <li><strong>Performance:</strong> Virtual DOM aggiorna solo ci√≤ che cambia</li>
                <li><strong>Persistence:</strong> useLocalStorage salva carrello tra sessioni</li>
                <li><strong>Custom Hooks:</strong> Logica riutilizzabile (useFetch, useLocalStorage)</li>
                <li><strong>Maintainability:</strong> Codice organizzato in componenti separati</li>
                <li><strong>Developer Experience:</strong> Hot reload, React DevTools</li>
                <li><strong>Scalability:</strong> Facile aggiungere nuove features</li>
            </ul>
        </div>
        
        <div class="navigazione">
            <a href="index.html" class="btn-nav">üìö Indice Lezione 7</a>
            <a href="../index.html" class="btn-nav">üè† Home Corso</a>
        </div>
    </div>
</body>
</html>
