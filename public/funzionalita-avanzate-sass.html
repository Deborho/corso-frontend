<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Funzionalit√† Avanzate SASS</title>
    <link rel="stylesheet" href="/style.css">
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>Funzionalit√† Avanzate SASS</h1>
            <p>Tecniche avanzate e architettura per progetti scalabili</p>
        </div>

        <h2>1. Maps e Liste Avanzate</h2>

        <h3>1.1 Maps Nidificate</h3>
        
        <div class="codice">
<pre>@use 'sass:map';

// Map complessa per theme system
$themes: (
  'light': (
    'background': #ffffff,
    'text': #333333,
    'primary': #3498db,
    'secondary': #2ecc71,
    'border': #ddd
  ),
  'dark': (
    'background': #2c3e50,
    'text': #ecf0f1,
    'primary': #3498db,
    'secondary': #2ecc71,
    'border': #34495e
  )
);

// Funzione per accedere a valori nidificati
@function theme-color($theme, $color) {
  @return map.get(map.get($themes, $theme), $color);
}

// Utilizzo
.light-theme {
  background: theme-color('light', 'background');
  color: theme-color('light', 'text');
  border: 1px solid theme-color('light', 'border');
}

.dark-theme {
  background: theme-color('dark', 'background');
  color: theme-color('dark', 'text');
  border: 1px solid theme-color('dark', 'border');
}</pre>
        </div>

        <h3>1.2 Map Deep Get</h3>
        
        <div class="codice">
<pre>@use 'sass:map';

// Map profondamente nidificata
$config: (
  'colors': (
    'primary': (
      'base': #3498db,
      'light': #5dade2,
      'dark': #2874a6
    ),
    'secondary': (
      'base': #2ecc71,
      'light': #58d68d,
      'dark': #239b56
    )
  ),
  'typography': (
    'sizes': (
      'small': 12px,
      'base': 16px,
      'large': 20px
    )
  )
);

// Funzione per accesso profondo
@function deep-get($map, $keys...) {
  @each $key in $keys {
    $map: map.get($map, $key);
  }
  @return $map;
}

// Utilizzo
.button {
  background: deep-get($config, 'colors', 'primary', 'base'); // #3498db
  font-size: deep-get($config, 'typography', 'sizes', 'base'); // 16px
  
  &:hover {
    background: deep-get($config, 'colors', 'primary', 'dark');
  }
}</pre>
        </div>

        <h3>1.3 Map Merge e Update</h3>
        
        <div class="codice">
<pre>@use 'sass:map';

$default-theme: (
  'primary': #3498db,
  'secondary': #2ecc71
);

$custom-theme: (
  'primary': #e74c3c,
  'accent': #f39c12
);

// Merge maps (custom sovrascrive default)
$final-theme: map.merge($default-theme, $custom-theme);
// Risultato: ('primary': #e74c3c, 'secondary': #2ecc71, 'accent': #f39c12)</pre>
        </div>

        <h2>2. Color Functions Avanzate</h2>

        <h3>2.1 Color Manipulation</h3>
        
        <div class="codice">
<pre>$base-color: #3498db;

// Tinta e Shade (mix con bianco/nero)
@function tint($color, $percentage) {
  @return mix(white, $color, $percentage);
}

@function shade($color, $percentage) {
  @return mix(black, $color, $percentage);
}

// Palette generator
.color-palette {
  .base {
    background: $base-color;
  }
  
  .tint-10 { background: tint($base-color, 10%); }
  .tint-20 { background: tint($base-color, 20%); }
  .tint-40 { background: tint($base-color, 40%); }
  
  .shade-10 { background: shade($base-color, 10%); }
  .shade-20 { background: shade($base-color, 20%); }
  .shade-40 { background: shade($base-color, 40%); }
}</pre>
        </div>

        <h3>2.2 Color Contrast</h3>
        
        <div class="codice">
<pre>@use 'sass:color';
@use 'sass:math';

// Calcola luminosit√† relativa
@function luminance($color) {
  $red: color.red($color) / 255;
  $green: color.green($color) / 255;
  $blue: color.blue($color) / 255;
  
  @return 0.2126 * $red + 0.7152 * $green + 0.0722 * $blue;
}

// Scegli testo bianco o nero in base al contrasto
@function contrast-color($color, $light: white, $dark: black) {
  @if luminance($color) > 0.5 {
    @return $dark;
  } @else {
    @return $light;
  }
}

// Utilizzo automatico
$colors: (
  'primary': #3498db,
  'secondary': #2ecc71,
  'danger': #e74c3c,
  'warning': #f39c12,
  'light': #ecf0f1,
  'dark': #2c3e50
);

@each $name, $color in $colors {
  .btn-#{$name} {
    background-color: $color;
    color: contrast-color($color); // Bianco o nero automatico!
  }
}</pre>
        </div>

        <h2>3. Math Operations Avanzate</h2>

        <h3>3.1 Responsive Font Sizing</h3>
        
        <div class="codice">
<pre>@use 'sass:math';

// Fluid typography con clamp()
@function fluid-size($min-size, $max-size, $min-vw: 320px, $max-vw: 1200px) {
  $slope: math.div($max-size - $min-size, $max-vw - $min-vw);
  $intercept: $min-size - ($slope * $min-vw);
  
  @return clamp(
    $min-size,
    $intercept + ($slope * 100vw),
    $max-size
  );
}

h1 {
  font-size: fluid-size(24px, 48px); // Da 24px a 48px
}

h2 {
  font-size: fluid-size(20px, 36px);
}

p {
  font-size: fluid-size(16px, 18px);
}</pre>
        </div>

        <h3>3.2 Modular Scale</h3>
        
        <div class="codice">
<pre>@use 'sass:math';

// Scala modulare per tipografia armoniosa
$base-size: 16px;
$ratio: 1.25; // Perfect Fourth

@function modular-scale($step) {
  @return $base-size * math.pow($ratio, $step);
}

.text-xs { font-size: modular-scale(-2); } // 10.24px
.text-sm { font-size: modular-scale(-1); } // 12.8px
.text-base { font-size: modular-scale(0); }  // 16px
.text-lg { font-size: modular-scale(1); }   // 20px
.text-xl { font-size: modular-scale(2); }   // 25px
.text-2xl { font-size: modular-scale(3); }  // 31.25px</pre>
        </div>

        <h2>4. Interpolation Avanzata</h2>

        <h3>4.1 Dynamic Property Names</h3>
        
        <div class="codice">
<pre>// Genera propriet√† dinamicamente
@mixin dynamic-property($property, $value) {
  #{$property}: $value;
}

.box {
  @include dynamic-property('margin-top', 20px);
  @include dynamic-property('padding-bottom', 15px);
}

// Genera vendor prefixes
@mixin prefix($property, $value, $prefixes: webkit moz ms o) {
  @each $prefix in $prefixes {
    -#{$prefix}-#{$property}: $value;
  }
  #{$property}: $value;
}

.element {
  @include prefix(transform, scale(1.1));
}

// Output:
// .element {
//   -webkit-transform: scale(1.1);
//   -moz-transform: scale(1.1);
//   -ms-transform: scale(1.1);
//   -o-transform: scale(1.1);
//   transform: scale(1.1);
// }</pre>
        </div>

        <h3>4.2 Dynamic Selectors</h3>
        
        <div class="codice">
<pre>// Genera selettori basati su dati
$states: ('hover', 'focus', 'active');

@each $state in $states {
  .button {
    &:#{$state} {
      opacity: 0.8;
    }
  }
}

// Output:
// .button:hover { opacity: 0.8; }
// .button:focus { opacity: 0.8; }
// .button:active { opacity: 0.8; }</pre>
        </div>

        <h2>5. CSS Custom Properties con SASS</h2>

        <h3>5.1 Genera CSS Variables da SASS</h3>
        
        <div class="codice">
<pre>// SASS variables per build time
$colors: (
  'primary': #3498db,
  'secondary': #2ecc71,
  'danger': #e74c3c
);

$font-sizes: (
  'small': 14px,
  'base': 16px,
  'large': 20px
);

// Genera CSS custom properties per runtime
:root {
  @each $name, $color in $colors {
    --color-#{$name}: #{$color};
  }
  
  @each $name, $size in $font-sizes {
    --font-#{$name}: #{$size};
  }
}

// Utilizzo con var()
.button {
  background: var(--color-primary);
  font-size: var(--font-base);
  
  &:hover {
    background: var(--color-secondary);
  }
}

// Fallback con SASS
.card {
  // Se CSS variable non supportata, usa SASS variable
  background: map-get($colors, 'primary');
  background: var(--color-primary);
}</pre>
        </div>

        <h3>5.2 Dark Mode con CSS Variables</h3>
        
        <div class="codice">
<pre>$light-theme: (
  'bg': #ffffff,
  'text': #333333,
  'primary': #3498db
);

$dark-theme: (
  'bg': #2c3e50,
  'text': #ecf0f1,
  'primary': #5dade2
);

// Light theme default
:root {
  @each $name, $value in $light-theme {
    --#{$name}: #{$value};
  }
}

// Dark theme override
[data-theme="dark"] {
  @each $name, $value in $dark-theme {
    --#{$name}: #{$value};
  }
}

// Utilizzo
body {
  background: var(--bg);
  color: var(--text);
}

.button {
  background: var(--primary);
}

// Cambio tema con JavaScript:
// document.documentElement.setAttribute('data-theme', 'dark');</pre>
        </div>

        <h2>6. Performance Optimization</h2>

        <h3>6.1 Evita Nesting Eccessivo</h3>
        
        <div class="codice">
<pre>// ‚ùå BAD - Troppo nesting (specificit√† alta)
.page {
  .sidebar {
    .widget {
      .title {
        font-size: 18px; // .page .sidebar .widget .title
      }
    }
  }
}

// GOOD - Piatto e specifico
.widget-title {
  font-size: 18px; // .widget-title (pi√π performante!)
}</pre>
        </div>

        <h3>6.2 Usa @extend con Parsimonia</h3>
        
        <div class="codice">
<pre>// ‚ö†Ô∏è Attenzione: @extend pu√≤ gonfiare i selettori
%button-base { padding: 10px; }

.btn-1 { @extend %button-base; }
.btn-2 { @extend %button-base; }
// ... 100+ classi

// Output: .btn-1, .btn-2, .btn-3, ... [100 selettori] { padding: 10px; }

// üí° Alternativa con mixin (pi√π controllabile)
@mixin button-base { padding: 10px; }

.btn-1 { @include button-base; }
.btn-2 { @include button-base; }</pre>
        </div>

        <h3>6.3 Source Map per Production</h3>
        
        <div class="codice">
<pre># Development: Con source maps
npx sass --watch scss:css

# Production: Compressed, no source maps
npx sass --style=compressed --no-source-map scss/main.scss css/main.min.css</pre>
        </div>

        <h2>7. Organizzazione Codice: Architettura ITCSS</h2>
        
        <div class="teoria">
            <p><strong>ITCSS (Inverted Triangle CSS)</strong> √® un'architettura che organizza CSS per specificit√† crescente.</p>
        </div>

        <div class="codice">
<pre>scss/
‚îú‚îÄ‚îÄ 1-settings/       // Variabili globali
‚îÇ   ‚îú‚îÄ‚îÄ _colors.scss
‚îÇ   ‚îú‚îÄ‚îÄ _typography.scss
‚îÇ   ‚îî‚îÄ‚îÄ _spacing.scss
‚îÇ
‚îú‚îÄ‚îÄ 2-tools/          // Mixins e functions
‚îÇ   ‚îú‚îÄ‚îÄ _mixins.scss
‚îÇ   ‚îî‚îÄ‚îÄ _functions.scss
‚îÇ
‚îú‚îÄ‚îÄ 3-generic/        // Reset, normalize
‚îÇ   ‚îî‚îÄ‚îÄ _normalize.scss
‚îÇ
‚îú‚îÄ‚îÄ 4-elements/       // HTML elements (h1, p, a)
‚îÇ   ‚îú‚îÄ‚îÄ _headings.scss
‚îÇ   ‚îî‚îÄ‚îÄ _links.scss
‚îÇ
‚îú‚îÄ‚îÄ 5-objects/        // Layout patterns (OOCSS)
‚îÇ   ‚îú‚îÄ‚îÄ _container.scss
‚îÇ   ‚îî‚îÄ‚îÄ _grid.scss
‚îÇ
‚îú‚îÄ‚îÄ 6-components/     // Componenti UI
‚îÇ   ‚îú‚îÄ‚îÄ _buttons.scss
‚îÇ   ‚îú‚îÄ‚îÄ _cards.scss
‚îÇ   ‚îî‚îÄ‚îÄ _navbar.scss
‚îÇ
‚îú‚îÄ‚îÄ 7-utilities/      // Utility classes
‚îÇ   ‚îú‚îÄ‚îÄ _spacing.scss
‚îÇ   ‚îî‚îÄ‚îÄ _text.scss
‚îÇ
‚îî‚îÄ‚îÄ main.scss         // Import tutto in ordine</pre>
        </div>

        <h2>8. Best Practices Riassunto</h2>

        <h3>8.1 Naming Conventions</h3>
        
        <div class="teoria">
            <ul>
                <li><strong>Variabili:</strong> <code>$color-primary</code>, <code>$font-size-large</code></li>
                <li><strong>Mixins:</strong> <code>@mixin button-style</code>, <code>@mixin responsive-text</code></li>
                <li><strong>Functions:</strong> <code>@function calculate-rem</code>, <code>@function spacing</code></li>
                <li><strong>Placeholders:</strong> <code>%button-base</code>, <code>%clearfix</code></li>
                <li><strong>Partials:</strong> <code>_variables.scss</code>, <code>_mixins.scss</code></li>
            </ul>
        </div>

        <h3>8.2 File Organization</h3>
        
        <div class="teoria">
            <ul>
                <li>Usa 7-1 pattern o ITCSS per progetti grandi</li>
                <li>Un componente = un file</li>
                <li>Raggruppa in cartelle per categoria</li>
                <li>Usa _index.scss come barrel file</li>
                <li>Mantieni file sotto 300 righe</li>
            </ul>
        </div>

        <h3>8.3 Performance</h3>
        
        <div class="teoria">
            <ul>
                <li>Evita nesting oltre 3-4 livelli</li>
                <li>Usa @extend per stili identici, @mixin per variazioni</li>
                <li>Compila in compressed per produzione</li>
                <li>Usa PurgeCSS per rimuovere CSS inutilizzato</li>
                <li>Monitora dimensione file compilato</li>
            </ul>
        </div>

        <h3>8.4 Maintainability</h3>
        
        <div class="teoria">
            <ul>
                <li>Commenta codice complesso</li>
                <li>Usa @use invece di @import</li>
                <li>Documenta mixins e functions</li>
                <li>Versiona il codice con Git</li>
                <li>Code review per modifiche importanti</li>
            </ul>
        </div>

        <h2>9. Tools e Workflow</h2>

        <h3>9.1 Package.json Scripts</h3>
        
        <div class="codice">
<pre>{
  "scripts": {
    "sass:dev": "npx sass --watch scss:css",
    "sass:build": "npx sass scss/main.scss css/main.css",
    "sass:prod": "npx sass --style=compressed --no-source-map scss/main.scss css/main.min.css",
    "sass:lint": "stylelint 'scss/**/*.scss'",
    "build": "npm run sass:prod"
  },
  "devDependencies": {
    "sass": "^1.69.5",
    "stylelint": "^15.11.0",
    "stylelint-config-sass-guidelines": "^10.0.0"
  }
}</pre>
        </div>

        <h3>9.2 Stylelint Configuration</h3>
        
        <div class="codice">
<pre>// .stylelintrc.json
{
  "extends": "stylelint-config-sass-guidelines",
  "rules": {
    "max-nesting-depth": 3,
    "selector-max-compound-selectors": 3,
    "selector-class-pattern": "^[a-z][a-z0-9]*(-[a-z0-9]+)*$",
    "order/properties-alphabetical-order": null
  }
}</pre>
        </div>

        <h2>10. Migrazione da CSS a SASS</h2>

        <h3>10.1 Step-by-Step</h3>
        
        <div class="teoria">
            <ol>
                <li><strong>Rename:</strong> Cambia <code>style.css</code> ‚Üí <code>style.scss</code></li>
                <li><strong>Extract Variables:</strong> Identifica valori ripetuti e crea variabili</li>
                <li><strong>Add Nesting:</strong> Converti selettori correlati in nesting</li>
                <li><strong>Create Mixins:</strong> Identifica pattern ripetuti</li>
                <li><strong>Organize:</strong> Dividi in partials per categoria</li>
                <li><strong>Optimize:</strong> Usa functions per calcoli</li>
                <li><strong>Test:</strong> Verifica che il CSS compilato sia identico</li>
            </ol>
        </div>

        <h3>10.2 Esempio Migrazione</h3>
        
        <div class="codice">
<pre>/* === PRIMA (CSS) === */
.button-primary {
  background: #3498db;
  color: white;
  padding: 10px 20px;
  border-radius: 4px;
}

.button-primary:hover {
  background: #2980b9;
}

.button-secondary {
  background: #2ecc71;
  color: white;
  padding: 10px 20px;
  border-radius: 4px;
}

.button-secondary:hover {
  background: #27ae60;
}


// === DOPO (SCSS) ===
// Variables
$color-primary: #3498db;
$color-secondary: #2ecc71;

// Mixin
@mixin button-base($bg-color) {
  background: $bg-color;
  color: white;
  padding: 10px 20px;
  border-radius: 4px;
  
  &:hover {
    background: darken($bg-color, 10%);
  }
}

// Usage
.button-primary {
  @include button-base($color-primary);
}

.button-secondary {
  @include button-base($color-secondary);
}</pre>
        </div>

        <h2>Punti Chiave</h2>
        
        <div class="teoria">
            <ul>
                <li>Maps nidificate per configurazioni complesse</li>
                <li>Color functions per palette automatiche</li>
                <li>Fluid typography con clamp() e math</li>
                <li>CSS custom properties + SASS per flessibilit√† runtime</li>
                <li>ITCSS o 7-1 pattern per architettura scalabile</li>
                <li>Nesting max 3-4 livelli per performance</li>
                <li>Compressed + no source maps per produzione</li>
                <li>Documenta mixins/functions complesse</li>
                <li>Usa @use invece di @import</li>
                <li>PurgeCSS per rimuovere CSS inutilizzato</li>
            </ul>
        </div>

        <div class="navigazione">
            <a href="/index.html" class="btn-home">Home</a>
            <a href="/link-utili.html" class="btn-link-utili">Link Utili</a>
            <a href="/lezione-4/index.html" class="btn-next">Lezione 4 - SASS ‚Üí</a>
        </div>
    </div>
</body>
</html>